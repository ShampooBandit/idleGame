(self.webpackChunkidleGame=self.webpackChunkidleGame||[]).push([[8871],{8871:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Tab1PageModule:()=>w});var o=n(7823),r=n(8583),i=n(665),a=n(581),l=n(2316);const s={name:"Imp",description:"",type:"",health:20,maxHealth:20,power:10,defence:5,multiplier:1,rewards:{resources:[{type:"Build",amount:5}],experience:5,money:10}},d={name:"Ogre",description:"",type:"",health:300,maxHealth:300,power:100,defence:50,multiplier:1,rewards:{resources:[{type:"Build",amount:100}],experience:50,money:100}},c=["Amber","Amethyst","Blood","Caulk","Chalk","Cobalt","Copper","Diamond","Emerald","Frosting","Garnet","Gold","Iodine","Jet","Malachite","Marble","Mercury","Obsidian","Opal","Polychromite","Quartz","Rainbow","Redstone","Rock Candy","Rose Quartz","Ruby","Rust","Shale","Star Sapphire","Sulfur","Sunstone","Tar","Titanium","Topaz","Uranium"],p={Amber:[[236,211,0]],Amethyst:[[117,0,220]],Blood:[[252,1,1]],Caulk:[[126,126,126]],Chalk:[[255,255,255]],Cobalt:[[0,73,208]],Copper:[[217,77,1]],Diamond:[[192,209,248]],Emerald:[[46,247,94]],Frosting:[[255,138,255]],Garnet:[[182,1,2]],Gold:[[255,255,16]],Iodine:[[182,82,0]],Jet:[[91,91,91]],Malachite:[[3,84,34]],Marble:[[252,224,249]],Mercury:[[166,166,170]],Obsidian:[[46,46,46]],Opal:[[166,219,250],[101,205,253],[184,253,189],[254,201,255]],Polychromite:[[255,142,145],[254,136,111],[247,158,51],[208,164,25],[156,183,34],[112,177,39],[75,200,63],[27,192,129],[24,185,186],[63,192,195],[91,171,255],[161,203,243],[224,128,193],[255,125,192]],Quartz:[[181,255,234]],Rainbow:[[224,224,0],[224,160,192],[87,146,255],[255,117,20],[0,224,128]],Redstone:[[255,113,19]],"Rock Candy":[[237,130,255]],"Rose Quartz":[[254,58,120]],Ruby:[[255,87,71]],Rust:[[127,47,30]],Shale:[[133,21,214]],"Star Sapphire":[[122,125,253]],Sulfur:[[227,184,0]],Sunstone:[[224,160,64]],Tar:[[1,1,1]],Titanium:[[215,215,215]],Topaz:[[255,235,194]],Uranium:[[24,255,53]]};var h=n(639),u=n(171);function g(e,t){1&e&&(h.TgZ(0,"div",16),h._uU(1,"Safe"),h.qZA())}function m(e,t){1&e&&(h.TgZ(0,"div",17),h._uU(1,"Dangerous"),h.qZA())}function f(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"li",18),h.TgZ(1,"span",19),h._uU(2),h.qZA(),h.TgZ(3,"div",20),h.TgZ(4,"div",21),h._uU(5),h.qZA(),h.qZA(),h.TgZ(6,"img",22),h.NdJ("click",function(){const t=h.CHM(e).$implicit,n=h.oxw().index;return h.oxw().clickEnemy(t,n)}),h.qZA(),h.qZA()}if(2&e){const e=t.$implicit,n=t.index,o=h.oxw().index,r=h.oxw();h.s9C("id","f"+o.toString()+(e.name+n).toString()),h.xp6(2),h.lnq("",r.setEnemyPos(e,n,o),"",e.type," ",e.name,""),h.xp6(3),h.Oqu(r.enemyHealthBarWidth(e,n,o))}}function x(e,t){if(1&e&&(h.TgZ(0,"div",8),h.TgZ(1,"div",9),h.TgZ(2,"div",10),h._uU(3),h.qZA(),h.YNc(4,g,2,0,"div",11),h.YNc(5,m,2,0,"div",12),h.qZA(),h.TgZ(6,"section",13),h.TgZ(7,"ul",14),h.YNc(8,f,7,5,"li",15),h.qZA(),h.qZA(),h.qZA()),2&e){const e=t.$implicit,n=t.index;h.xp6(3),h.hij("Floor ",n+1,""),h.xp6(1),h.Q6J("ngIf",e.safe),h.xp6(1),h.Q6J("ngIf",!e.safe),h.xp6(3),h.Q6J("ngForOf",e.enemies)}}const y=[{path:"",component:(()=>{class e{constructor(e){this.gameData=e}ngOnInit(){this.data=this.gameData,this.battleTargetFloor=0,this.battleTargetGroup={},this.battleTarget=null,this.battleRewards={Resources:[],Experience:0},this.inBattle=!1,this.transitionBattle=!1,setInterval(()=>{this.checkForEnemies()},5e3)}checkPlayerLevelup(){this.data.player.experience>=this.data.player.nextExperience&&(this.data.player.experience=0,this.data.player.maxHealth+=5*this.data.player.level,this.data.player.health=this.data.player.maxHealth,this.data.player.maxResource+=10*this.data.player.level,this.data.player.power+=10,this.data.player.defence+=5,this.data.player.nextExperience+=50*this.data.player.level,this.data.player.level+=1)}randomInt(e){return Math.floor(Math.random()*e)}checkForEnemies(){let e=0;this.data&&this.data.house.floors.forEach(t=>{t.safe||(this.randomInt(100)<100-5*t.enemies.length&&this.spawnEnemy(e),this.moveEnemies(e)),e++})}moveEnemies(e){let t=0;this.data.house.floors[e].enemies.forEach(n=>{if(this.randomInt(100)<25){e.toString();let o=document.getElementById("f"+e.toString()+n.name+t);if(null!=o){let e=this.randomInt(parseInt(getComputedStyle(o.parentElement).width.replace("px",""))-138)+5,n=this.randomInt(parseInt(getComputedStyle(o.parentElement).height.replace("px",""))-138)+5,r=this.randomInt(5)+3,i=this.randomInt(5)+3,a="left "+r.toString()+"s, top "+i.toString()+"s";o.style.transition=a,o.style.left=e.toString()+"px",o.style.top=n.toString()+"px",o.style.zIndex=n.toString(),t++}}})}enemyHealthBarWidth(e,t,n){let o=document.getElementById("f"+n.toString()+(e.name+t).toString()).children[1].children[0],r=e.health/e.maxHealth;r*=100,o.style.width=r.toString()+"%",this.enemyHealthBarColor(e,o)}enemyHealthBarColor(e,t){let n=p[e.type];n.length>1?(t.style.animation=e.type+"Colors",t.style.animationDuration="3s"):(n=n[0],t.style.backgroundColor="rgb("+n[0].toString()+","+n[1].toString()+","+n[2].toString()+")")}setEnemyPos(e,t,n){var o=document.getElementById("f"+n.toString()+(e.name+t).toString());if(null!=o&&0==e.init){let t=parseInt(getComputedStyle(o.parentElement).width.replace("px","")),n=parseInt(getComputedStyle(o.parentElement).height.replace("px","")),r=Math.max(this.randomInt(t-138),0).toString()+"px";o.style.left=r;let i=(Math.max(this.randomInt(n-138),0)+2).toString();o.style.top=i+"px",o.style.zIndex=i,e.init=!0}}spawnEnemy(e){let t=c[this.randomInt(c.length)],n=this.generateEnemy(e,t);this.data.house.floors[e].enemies.push(n)}clickEnemy(e,t){e.health-=Math.max(this.data.player.power-e.defence,1),e.health<=0&&this.killEnemy(e,t)}killEnemy(e,t){let n=this.data.house.floors[t].enemies.indexOf(e);this.data.player.experience+=e.rewards.experience,this.checkPlayerLevelup();for(var o=0;o<e.rewards.resources.length;o++)this.data.player.discoveredResources[e.rewards.resources[o].type]||(this.data.player.discoveredResources[e.rewards.resources[o].type]=!0),this.data.player.resources[e.rewards.resources[o].type]+=e.rewards.resources[o].amount,this.data.player.resources[e.rewards.resources[o].type]>this.data.player.maxResource&&(this.data.player.resources[e.rewards.resources[o].type]=this.data.player.maxResource);this.data.house.floors[t].enemies.splice(n,1)}generateEnemyGroup(e){let t=this.randomInt(4)+1,n=c[this.randomInt(c.length)],o={enemies:[]};for(var r=0;r<t;r++){let t=this.generateEnemy(e,n);o.enemies.push(t)}this.data.house.floors[e].groups.push(o)}generateEnemy(e,t){let n=Math.floor(Math.max(0,15-e)/2.6*20),o=(Math.max(e-10,0),this.randomInt(100)),r=1+this.randomInt(e);if(o<n){let e=JSON.parse(JSON.stringify(s));return e.init=!1,e.type=t,e.multiplier=r,e.health*=e.multiplier,e.maxHealth=e.health,e.power*=e.multiplier,e.defence*=e.multiplier,e.rewards.resources[0].amount*=e.multiplier,e.rewards.experience*=e.multiplier,e.rewards.resources.push({type:t,amount:5*e.multiplier}),e}{let e=JSON.parse(JSON.stringify(d));return e.init=!1,e.type=t,e.multiplier=r,e.health*=e.multiplier,e.maxHealth=e.health,e.power*=e.multiplier,e.defence*=e.multiplier,e.rewards.resources[0].amount*=e.multiplier,e.rewards.experience*=e.multiplier,e.rewards.resources.push({type:t,amount:100*e.multiplier}),e}}getNextFloorCost(){return Math.pow(2,this.data.house.height)+10*this.data.house.height}buildNextFloor(){var e=this.getNextFloorCost();if(this.data.player.resources.Build>=e)this.data.house.floors.push({safe:!1,machines:null,enemies:[],groups:[]}),this.data.house.height++,this.data.player.resources.Build-=e;else{var t=document.getElementById("floor-purchase");t.style.animationName="shake",t.style.animationDirection="both",t.style.animationTimingFunction="cubic-bezier(.36,.07,.19,.97)",t.style.backgroundColor="rgb(170, 160, 160)",t.addEventListener("animationend",e=>{t.style.animationName="none",t.style.animation=null,t.style.backgroundColor="#AAA"})}}}return e.\u0275fac=function(t){return new(t||e)(h.Y36(u.M))},e.\u0275cmp=h.Xpm({type:e,selectors:[["app-tab1"]],decls:13,vars:4,consts:[[3,"translucent"],[3,"fullscreen"],[1,"floor-container"],["class","floor",4,"ngFor","ngForOf"],["id","floor-purchase",3,"click"],[2,"color","black","margin-right","12px"],["src","assets/resources/Build.png",2,"width","24px","height","24px"],[2,"color","#09F"],[1,"floor"],[1,"floor-header"],["id","floor_number"],["id","safety-text","style","background-color: green; width: 64px;",4,"ngIf"],["id","safety-text","style","background-color: red; width: 96px;",4,"ngIf"],[1,"floor-content"],[1,"floor-enemy-container"],["class","floor-enemy",3,"id",4,"ngFor","ngForOf"],["id","safety-text",2,"background-color","green","width","64px"],["id","safety-text",2,"background-color","red","width","96px"],[1,"floor-enemy",3,"id"],[1,"floor-enemy-name"],[1,"fillbar-container"],[1,"fillbar"],["src","assets/enemies/imp.png",1,"enemy-sprite",2,"width","128px","height","102px",3,"click"]],template:function(e,t){1&e&&(h.TgZ(0,"ion-header",0),h.TgZ(1,"ion-toolbar"),h.TgZ(2,"ion-title"),h._uU(3," House "),h.qZA(),h.qZA(),h.qZA(),h.TgZ(4,"ion-content",1),h.TgZ(5,"div",2),h.YNc(6,x,9,4,"div",3),h.TgZ(7,"div",4),h.NdJ("click",function(){return t.buildNextFloor()}),h.TgZ(8,"span",5),h._uU(9,"Build next floor:"),h.qZA(),h._UZ(10,"img",6),h.TgZ(11,"span",7),h._uU(12),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&e&&(h.Q6J("translucent",!0),h.xp6(4),h.Q6J("fullscreen",!0),h.xp6(2),h.Q6J("ngForOf",t.data.house.floors),h.xp6(6),h.hij(" ",t.getNextFloorCost(),""))},directives:[o.Gu,o.sr,o.wd,o.W2,r.sg,r.O5],styles:[".floor-container[_ngcontent-%COMP%]{width:calc(100% - 16px);height:calc(100% - 16px);border:1px solid green;border-radius:8px;padding:8px;margin:8px;color:green;white-space:pre-wrap;overflow-y:auto;display:flex;flex-direction:column-reverse}.floor[_ngcontent-%COMP%]{background:#e9e9e9;background:radial-gradient(circle,#e9e9e9 0,#c2c2c2 35%,#9c9c9c 100%)}#floor-purchase[_ngcontent-%COMP%], .floor[_ngcontent-%COMP%]{width:100%;min-height:256px;margin-top:8px;border-radius:8px}#floor-purchase[_ngcontent-%COMP%]{line-height:256px;font-size:24px;background-color:#aaa;border:1px solid #fff;text-align:center;animation-duration:.2s}#floor-purchase[_ngcontent-%COMP%]:hover{background-color:#777}.floor-header[_ngcontent-%COMP%]{justify-content:space-between;display:flex;flex-direction:row;width:100%;height:32px;line-height:32px}.fillbar-container[_ngcontent-%COMP%]{border:3px solid #555;background-color:#ddd;border-radius:4px;width:128px;height:16px;padding:1px}.fillbar[_ngcontent-%COMP%]{border-radius:2px;height:100%;animation-iteration-count:infinite!important}.floor-content[_ngcontent-%COMP%]{height:calc(100% - 32px);border-bottom-left-radius:4px;border-bottom-right-radius:4px}.floor-content[_ngcontent-%COMP%], .floor-enemy-groups[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%}.floor-enemy-groups[_ngcontent-%COMP%]{flex-direction:row;justify-content:space-around}.floor-enemy-container[_ngcontent-%COMP%]{list-style:none;width:100%;height:100%;position:relative;padding-right:16px;padding-left:16px}.floor-enemy[_ngcontent-%COMP%]{transition-property:left,top;transition-duration:2s}.floor-drops[_ngcontent-%COMP%], .floor-enemy[_ngcontent-%COMP%]{position:absolute;align-items:center}.floor-enemy-name[_ngcontent-%COMP%]{padding:2px;border-radius:2px;color:#1ab3f1;background-color:#fff}.enemy-group-container[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:space-around}.enemy-group-infobox[_ngcontent-%COMP%]{visibility:hidden;width:auto;background-color:#000;color:#fff;text-align:center;padding:5px;border-radius:6px;position:absolute;bottom:128px;z-index:1}.enemy-group-container[_ngcontent-%COMP%]:hover   .enemy-group-infobox[_ngcontent-%COMP%]{visibility:visible}.enemy-group-container[_ngcontent-%COMP%]:hover{background-color:#6af}.hidden[_ngcontent-%COMP%]{visibility:hidden}.battle-container[_ngcontent-%COMP%]{position:absolute;flex-direction:column;align-items:center;left:50%;right:50%;top:50%;bottom:50%;border:1px solid #000;background-color:#fff;border-radius:8px;animation-duration:.75s;animation-fill-mode:forwards}.battle-container[_ngcontent-%COMP%], .battle-enemy-field[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.battle-enemy-field[_ngcontent-%COMP%]{position:relative;height:300px;width:100%;flex-direction:row;flex-wrap:wrap;align-items:flex-end}.battle-enemy-infobox[_ngcontent-%COMP%]{visibility:hidden;width:128px;background-color:#000;color:#fff;text-align:center;padding:5px;border-radius:6px;display:flex;flex-direction:column;align-items:center;position:absolute;top:0;z-index:1}.battle-enemy[_ngcontent-%COMP%]:hover   .battle-enemy-infobox[_ngcontent-%COMP%]{visibility:visible}.battle-player-actions[_ngcontent-%COMP%]{height:192px;width:100%;border-radius:4px;border:1px solid #000;display:flex;flex-direction:row;align-items:center;justify-content:space-around}.battle-player-actions[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{background:#0000;color:#000;font-size:24px}.battle-player-actions[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]:hover{text-decoration:underline}.battle-player-info[_ngcontent-%COMP%]{height:128px;width:128px;border:1px solid #000;border-radius:4px;font-size:16px;color:#000;display:flex;flex-direction:column;align-items:center}.player-info-name[_ngcontent-%COMP%]{display:flex;border-bottom:1px solid #000;height:32px;width:100%;align-items:center;justify-content:space-around}.player-info-stat[_ngcontent-%COMP%]{margin:4px;display:flex;align-items:center;justify-content:space-between;width:calc(100% - 8px)}#floor_number[_ngcontent-%COMP%]{color:#08f;background-color:#fff;width:64px}#floor_number[_ngcontent-%COMP%], #safety-text[_ngcontent-%COMP%]{border-radius:8px;text-align:center}#safety-text[_ngcontent-%COMP%]{color:#fff}#moves[_ngcontent-%COMP%]{width:calc(100% - 16px);height:15%;border:1px solid green;border-radius:8px;padding:8px;white-space:pre-wrap;overflow-y:auto}#commandBox[_ngcontent-%COMP%], #moves[_ngcontent-%COMP%]{margin:8px;color:green}#commandBox[_ngcontent-%COMP%]{display:flex;align-items:center}#commandBox[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{--placeholder-color:#a9a9a9}@keyframes shake{10%,90%{transform:translate3d(-1px,0,0)}20%,80%{transform:translate3d(2px,0,0)}30%,50%,70%{transform:translate3d(-4px,0,0)}40%,60%{transform:translate3d(4px,0,0)}}@keyframes attack{25%{transform:translate3d(0,4px,0)}to{transform:translate3d(0,-4px,0)}}@keyframes growFromCenter{0%{left:50%;top:50%;width:0;height:0}to{left:12%;top:25%;width:75%;height:50%}}@keyframes shrinkToCenter{0%{left:12%;top:25%;width:75%;height:50%}to{left:50%;top:50%;width:0;height:0}}.grown[_ngcontent-%COMP%]{left:12%;top:25%;width:75%;height:50%}"]}),e})()}];let b=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h.oAB({type:e}),e.\u0275inj=h.cJS({imports:[[l.Bz.forChild(y)],l.Bz]}),e})(),w=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h.oAB({type:e}),e.\u0275inj=h.cJS({imports:[[o.Pc,r.ez,i.u5,a.e,b]]}),e})()}}]);