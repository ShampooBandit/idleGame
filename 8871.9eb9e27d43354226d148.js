(self.webpackChunkidleGame=self.webpackChunkidleGame||[]).push([[8871],{8871:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Tab1PageModule:()=>O});var a=n(3083),i=n(8583),o=n(665),r=n(581),l=n(2316);const s={name:"Imp",description:"",type:"",health:20,maxHealth:20,power:10,defence:5,multiplier:1,rewards:{resources:[{type:"Build",amount:5}],experience:5,money:10}},c={name:"Ogre",description:"",type:"",health:300,maxHealth:300,power:100,defence:50,multiplier:1,rewards:{resources:[{type:"Build",amount:100}],experience:50,money:100}},d=["Amber","Amethyst","Blood","Caulk","Chalk","Cobalt","Copper","Diamond","Emerald","Frosting","Garnet","Gold","Iodine","Jet","Malachite","Marble","Mercury","Obsidian","Opal","Polychromite","Quartz","Rainbow","Redstone","Rock Candy","Rose Quartz","Ruby","Rust","Shale","Star Sapphire","Sulfur","Sunstone","Tar","Titanium","Topaz","Uranium"];var p=n(639),h=n(171);function g(e,t){1&e&&(p.TgZ(0,"div",19),p._uU(1,"Safe"),p.qZA())}function u(e,t){1&e&&(p.TgZ(0,"div",20),p._uU(1,"Dangerous"),p.qZA())}function f(e,t){if(1&e&&(p.TgZ(0,"div"),p.TgZ(1,"div",27),p._uU(2),p.qZA(),p.qZA()),2&e){const e=t.$implicit;p.xp6(2),p.AsE("",e.type," ",e.name,"")}}function m(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"div",23),p.NdJ("click",function(){const t=p.CHM(e).$implicit,n=p.oxw(2).index;return p.oxw().startBattle(t,n)}),p.TgZ(1,"div",24),p.YNc(2,f,3,2,"div",25),p.qZA(),p._UZ(3,"img",26),p.qZA()}if(2&e){const e=t.$implicit;p.xp6(2),p.Q6J("ngForOf",e.enemies)}}function x(e,t){if(1&e&&(p.TgZ(0,"div",21),p.YNc(1,m,4,1,"div",22),p.qZA()),2&e){const e=p.oxw().$implicit;p.xp6(1),p.Q6J("ngForOf",e.groups)}}function y(e,t){if(1&e&&(p.TgZ(0,"div",12),p.TgZ(1,"div",13),p.TgZ(2,"div",14),p._uU(3),p.qZA(),p.YNc(4,g,2,0,"div",15),p.YNc(5,u,2,0,"div",16),p.qZA(),p.TgZ(6,"div",17),p.YNc(7,x,2,1,"div",18),p.qZA(),p.qZA()),2&e){const e=t.$implicit,n=t.index,a=p.oxw();p.xp6(3),p.hij("Floor ",n+1,""),p.xp6(1),p.Q6J("ngIf",e.safe),p.xp6(1),p.Q6J("ngIf",!e.safe),p.xp6(2),p.Q6J("ngIf",!a.inBattle)}}function b(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"div",28),p.TgZ(1,"button",29),p.NdJ("click",function(){return p.CHM(e),p.oxw().doBattleTurn()}),p._uU(2,"AGGRESS"),p.qZA(),p.TgZ(3,"button",29),p.NdJ("click",function(){return p.CHM(e),p.oxw().closeBattle()}),p._uU(4,"ABSCOND"),p.qZA(),p.qZA()}}function w(e,t){1&e&&p._UZ(0,"div",36)}function Z(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"div",32),p.TgZ(1,"div",33),p.TgZ(2,"span"),p._uU(3),p.qZA(),p.TgZ(4,"span"),p._uU(5),p.qZA(),p.TgZ(6,"span"),p._uU(7),p.qZA(),p.TgZ(8,"span"),p._uU(9),p.qZA(),p.qZA(),p.TgZ(10,"img",34),p.NdJ("click",function(){const t=p.CHM(e).$implicit;return p.oxw(2).battleTarget=t}),p.qZA(),p.YNc(11,w,1,0,"div",35),p.qZA()}if(2&e){const e=t.$implicit,n=p.oxw(2);p.xp6(3),p.AsE("",e.type," ",e.name,""),p.xp6(2),p.hij("HP ",e.health,""),p.xp6(2),p.hij("Pow ",e.power,""),p.xp6(2),p.hij("Def ",e.defence,""),p.xp6(2),p.Q6J("ngIf",n.battleTarget==e)}}function v(e,t){if(1&e&&(p.TgZ(0,"div",30),p.YNc(1,Z,12,6,"div",31),p.qZA()),2&e){const e=p.oxw();p.xp6(1),p.Q6J("ngForOf",e.battleTargetGroup.enemies)}}function T(e,t){if(1&e&&(p.TgZ(0,"div",37),p.TgZ(1,"div",38),p.TgZ(2,"span"),p._uU(3),p.qZA(),p.qZA(),p.TgZ(4,"div",39),p.TgZ(5,"span"),p._uU(6,"HP"),p.qZA(),p.TgZ(7,"span"),p._uU(8),p.qZA(),p.qZA(),p.TgZ(9,"div",39),p.TgZ(10,"span"),p._uU(11,"Pow"),p.qZA(),p.TgZ(12,"span"),p._uU(13),p.qZA(),p.qZA(),p.TgZ(14,"div",39),p.TgZ(15,"span"),p._uU(16,"Def"),p.qZA(),p.TgZ(17,"span"),p._uU(18),p.qZA(),p.qZA(),p.qZA()),2&e){const e=p.oxw();p.xp6(3),p.Oqu(e.data.player.name),p.xp6(5),p.Oqu(e.data.player.health),p.xp6(5),p.Oqu(e.data.player.power),p.xp6(5),p.Oqu(e.data.player.defence)}}const C=[{path:"",component:(()=>{class e{constructor(e){this.gameData=e}ngOnInit(){this.data=this.gameData,this.battleTargetFloor=0,this.battleTargetGroup={},this.battleTarget=null,this.battleRewards={Resources:[],Experience:0},this.inBattle=!1,this.transitionBattle=!1;let e=document.getElementById("battleContainer");e.addEventListener("animationend",()=>{this.inBattle?(e.classList.add("hidden"),this.inBattle=!1):(e.classList.add("grown"),this.inBattle=!0),e.style.animationName="",this.transitionBattle=!1}),setInterval(()=>{this.checkForEnemies()},5e3)}startBattle(e,t){let n=document.getElementById("battleContainer");this.battleTargetFloor=t,this.battleTargetGroup=e,this.transitionBattle=!0,n.classList.remove("hidden"),n.style.animationName="growFromCenter"}doBattleTurn(){this.attackEnemy();for(var e=0;e<this.battleTargetGroup.enemies.length;e++)if(this.attackPlayer(this.battleTargetGroup.enemies[e]),this.data.player.health<=0)return void this.closeBattle();this.checkForBattleComplete()}attackEnemy(){this.battleTarget?(this.battleTarget.health-=this.data.player.power-this.battleTarget.defence,this.battleTarget.health<=0&&this.enemyDeath(this.battleTarget)):(this.battleTargetGroup.enemies[0].health-=this.data.player.power-this.battleTargetGroup.enemies[0].defence,this.battleTargetGroup.enemies[0].health<=0&&this.enemyDeath(this.battleTargetGroup.enemies[0]))}enemyDeath(e){var t=this.battleTargetGroup.enemies.indexOf(e);this.data.player.experience+=e.rewards.experience;for(var n=0;n<e.rewards.resources.length;n++)this.data.player.discoveredResources[e.rewards.resources[n].type]||(this.data.player.discoveredResources[e.rewards.resources[n].type]=!0),this.data.player.resources[e.rewards.resources[n].type]+=e.rewards.resources[n].amount,this.checkPlayerLevelup(),this.data.player.resources[e.rewards.resources[n].type]>this.data.player.maxResource&&(this.data.player.resources[e.rewards.resources[n].type]=this.data.player.maxResource);this.battleTargetGroup.enemies.splice(t,1)}attackPlayer(e){this.data.player.health-=e.power-this.data.player.defence}checkForBattleComplete(){this.battleTargetGroup.enemies.length<=0&&this.winBattle()}checkPlayerLevelup(){this.data.player.experience>=this.data.player.nextExperience&&(this.data.player.experience=0,this.data.player.maxHealth+=5*this.data.player.level,this.data.player.maxResource+=10*this.data.player.level,this.data.player.power+=2,this.data.player.defence+=1,this.data.player.nextExperience+=50*this.data.player.level,this.data.player.level+=1)}winBattle(){var e=this.data.house.floors[this.battleTargetFloor].groups.indexOf(this.battleTargetGroup);this.data.house.floors[this.battleTargetFloor].groups.splice(e,1),this.closeBattle()}closeBattle(){let e=document.getElementById("battleContainer");this.battleTargetGroup={},this.battleTarget=null,this.transitionBattle=!0,this.data.player.health=this.data.player.maxHealth,e.classList.remove("grown"),e.style.animationName="shrinkToCenter"}randomInt(e){return Math.floor(Math.random()*e)}checkForEnemies(){let e=0;this.data&&this.data.house.floors.forEach(t=>{t.safe||this.randomInt(100)<100-20*t.groups.length&&this.generateEnemyGroup(e),e++})}generateEnemyGroup(e){let t=this.randomInt(4)+1,n=d[this.randomInt(d.length)],a={enemies:[]};for(var i=0;i<t;i++){let t=this.generateEnemy(e,n);a.enemies.push(t)}this.data.house.floors[e].groups.push(a)}generateEnemy(e,t){let n=Math.floor(Math.max(0,15-e)/2.6*20),a=(Math.max(e-10,0),this.randomInt(100)),i=1+this.randomInt(e);if(a<n){let e=JSON.parse(JSON.stringify(s));return e.type=t,e.multiplier=i,e.health*=e.multiplier,e.maxHealth=e.health,e.power*=e.multiplier,e.defence*=e.multiplier,e.rewards.resources[0].amount*=e.multiplier,e.rewards.resources.push({type:t,amount:5*e.multiplier}),e}{let e=JSON.parse(JSON.stringify(c));return e.type=t,e.multiplier=i,e.health*=e.multiplier,e.maxHealth=e.health,e.power*=e.multiplier,e.defence*=e.multiplier,e.rewards.resources[0].amount*=e.multiplier,e.rewards.resources.push({type:t,amount:100}),e}}getNextFloorCost(){return Math.pow(2,this.data.house.height)+10*this.data.house.height}buildNextFloor(){var e=this.getNextFloorCost();if(this.data.player.resources.Build>=e)this.data.house.floors.push({safe:!1,machines:null,groups:[]}),this.data.house.height++,this.data.player.resources.Build-=e;else{var t=document.getElementById("floor-purchase");t.style.animationName="shake",t.style.animationDirection="both",t.style.animationTimingFunction="cubic-bezier(.36,.07,.19,.97)",t.style.backgroundColor="rgb(170, 160, 160)",t.addEventListener("animationend",e=>{t.style.animationName="none",t.style.animation=null,t.style.backgroundColor="#AAA"})}}}return e.\u0275fac=function(t){return new(t||e)(p.Y36(h.M))},e.\u0275cmp=p.Xpm({type:e,selectors:[["app-tab1"]],decls:17,vars:7,consts:[[3,"translucent"],[3,"fullscreen"],[1,"floor-container"],["class","floor",4,"ngFor","ngForOf"],["id","floor-purchase",3,"click"],[2,"color","black","margin-right","12px"],["src","assets/resources/Build.png",2,"width","24px","height","24px"],[2,"color","#09F"],["id","battleContainer",1,"battle-container","hidden"],["class","battle-player-actions",4,"ngIf"],["class","battle-enemy-field",4,"ngIf"],["class","battle-player-info",4,"ngIf"],[1,"floor"],[1,"floor-header"],["id","floor_number"],["id","safety-text","style","background-color: green; width: 64px;",4,"ngIf"],["id","safety-text","style","background-color: red; width: 96px;",4,"ngIf"],[1,"floor-content"],["class","floor-enemy-groups",4,"ngIf"],["id","safety-text",2,"background-color","green","width","64px"],["id","safety-text",2,"background-color","red","width","96px"],[1,"floor-enemy-groups"],["class","enemy-group-container",3,"click",4,"ngFor","ngForOf"],[1,"enemy-group-container",3,"click"],[1,"enemy-group-infobox"],[4,"ngFor","ngForOf"],["src","assets/enemies/imp.png",1,"enemy-sprite",2,"width","128px","height","128px"],[1,"infobox-text"],[1,"battle-player-actions"],[1,"action",3,"click"],[1,"battle-enemy-field"],["class","battle-enemy",4,"ngFor","ngForOf"],[1,"battle-enemy"],[1,"battle-enemy-infobox"],["src","assets/enemies/imp.png",1,"enemy-sprite",2,"width","128px","height","128px",3,"click"],["style","border: 1px solid black; width: 100%; height: 1px;",4,"ngIf"],[2,"border","1px solid black","width","100%","height","1px"],[1,"battle-player-info"],[1,"player-info-name"],[1,"player-info-stat"]],template:function(e,t){1&e&&(p.TgZ(0,"ion-header",0),p.TgZ(1,"ion-toolbar"),p.TgZ(2,"ion-title"),p._uU(3," House "),p.qZA(),p.qZA(),p.qZA(),p.TgZ(4,"ion-content",1),p.TgZ(5,"div",2),p.YNc(6,y,8,4,"div",3),p.TgZ(7,"div",4),p.NdJ("click",function(){return t.buildNextFloor()}),p.TgZ(8,"span",5),p._uU(9,"Build next floor:"),p.qZA(),p._UZ(10,"img",6),p.TgZ(11,"span",7),p._uU(12),p.qZA(),p.qZA(),p.qZA(),p.TgZ(13,"div",8),p.YNc(14,b,5,0,"div",9),p.YNc(15,v,2,1,"div",10),p.YNc(16,T,19,4,"div",11),p.qZA(),p.qZA()),2&e&&(p.Q6J("translucent",!0),p.xp6(4),p.Q6J("fullscreen",!0),p.xp6(2),p.Q6J("ngForOf",t.data.house.floors),p.xp6(6),p.hij(" ",t.getNextFloorCost(),""),p.xp6(2),p.Q6J("ngIf",t.inBattle&&!t.transitionBattle),p.xp6(1),p.Q6J("ngIf",t.inBattle&&!t.transitionBattle),p.xp6(1),p.Q6J("ngIf",t.inBattle&&!t.transitionBattle))},directives:[a.Gu,a.sr,a.wd,a.W2,i.sg,i.O5],styles:[".floor-container[_ngcontent-%COMP%]{width:calc(100% - 16px);height:calc(100% - 16px);border:1px solid green;border-radius:8px;padding:8px;margin:8px;color:green;white-space:pre-wrap;overflow-y:auto;display:flex;flex-direction:column-reverse}.floor[_ngcontent-%COMP%]{background:#e9e9e9;background:radial-gradient(circle,#e9e9e9 0,#c2c2c2 35%,#9c9c9c 100%)}#floor-purchase[_ngcontent-%COMP%], .floor[_ngcontent-%COMP%]{width:100%;min-height:256px;margin-top:8px;border-radius:8px}#floor-purchase[_ngcontent-%COMP%]{line-height:256px;font-size:24px;background-color:#aaa;border:1px solid #fff;text-align:center;animation-duration:.2s}#floor-purchase[_ngcontent-%COMP%]:hover{background-color:#777}.floor-header[_ngcontent-%COMP%]{justify-content:space-between;display:flex;flex-direction:row;width:100%;height:32px;line-height:32px}.floor-content[_ngcontent-%COMP%]{height:calc(100% - 32px);border-bottom-left-radius:4px;border-bottom-right-radius:4px}.floor-content[_ngcontent-%COMP%], .floor-enemy-groups[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%}.floor-enemy-groups[_ngcontent-%COMP%]{flex-direction:row;justify-content:space-around}.enemy-group-container[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:space-around}.enemy-group-infobox[_ngcontent-%COMP%]{visibility:hidden;width:auto;background-color:#000;color:#fff;text-align:center;padding:5px;border-radius:6px;position:absolute;bottom:128px;z-index:1}.enemy-group-container[_ngcontent-%COMP%]:hover   .enemy-group-infobox[_ngcontent-%COMP%]{visibility:visible}.enemy-group-container[_ngcontent-%COMP%]:hover{background-color:#6af}.hidden[_ngcontent-%COMP%]{visibility:hidden}.battle-container[_ngcontent-%COMP%]{position:absolute;flex-direction:column;align-items:center;left:50%;right:50%;top:50%;bottom:50%;border:1px solid #000;background-color:#fff;border-radius:8px;animation-duration:.75s;animation-fill-mode:forwards}.battle-container[_ngcontent-%COMP%], .battle-enemy-field[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.battle-enemy-field[_ngcontent-%COMP%]{position:relative;height:300px;width:100%;flex-direction:row;flex-wrap:wrap;align-items:flex-end}.battle-enemy-infobox[_ngcontent-%COMP%]{visibility:hidden;width:128px;background-color:#000;color:#fff;text-align:center;padding:5px;border-radius:6px;display:flex;flex-direction:column;align-items:center;position:absolute;top:0;z-index:1}.battle-enemy[_ngcontent-%COMP%]:hover   .battle-enemy-infobox[_ngcontent-%COMP%]{visibility:visible}.battle-player-actions[_ngcontent-%COMP%]{height:192px;width:100%;border-radius:4px;border:1px solid #000;color:#000;display:flex;flex-direction:row;align-items:center;justify-content:space-around}.battle-player-actions[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{background:#0000;font-size:24px}.battle-player-actions[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]:hover{text-decoration:underline}.battle-player-info[_ngcontent-%COMP%]{height:128px;width:128px;border:1px solid #000;border-radius:4px;font-size:16px;color:#000;display:flex;flex-direction:column;align-items:center}.player-info-name[_ngcontent-%COMP%]{display:flex;border-bottom:1px solid #000;height:32px;width:100%;align-items:center;justify-content:space-around}.player-info-stat[_ngcontent-%COMP%]{margin:4px;display:flex;align-items:center;justify-content:space-between;width:calc(100% - 8px)}#floor_number[_ngcontent-%COMP%]{color:#08f;background-color:#fff;width:64px}#floor_number[_ngcontent-%COMP%], #safety-text[_ngcontent-%COMP%]{border-radius:8px;text-align:center}#safety-text[_ngcontent-%COMP%]{color:#fff}#moves[_ngcontent-%COMP%]{width:calc(100% - 16px);height:15%;border:1px solid green;border-radius:8px;padding:8px;white-space:pre-wrap;overflow-y:auto}#commandBox[_ngcontent-%COMP%], #moves[_ngcontent-%COMP%]{margin:8px;color:green}#commandBox[_ngcontent-%COMP%]{display:flex;align-items:center}#commandBox[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{--placeholder-color:#a9a9a9}@keyframes shake{10%,90%{transform:translate3d(-1px,0,0)}20%,80%{transform:translate3d(2px,0,0)}30%,50%,70%{transform:translate3d(-4px,0,0)}40%,60%{transform:translate3d(4px,0,0)}}@keyframes attack{25%{transform:translate3d(0,4px,0)}to{transform:translate3d(0,-4px,0)}}@keyframes growFromCenter{0%{left:50%;top:50%;width:0;height:0}to{left:12%;top:25%;width:75%;height:50%}}@keyframes shrinkToCenter{0%{left:12%;top:25%;width:75%;height:50%}to{left:50%;top:50%;width:0;height:0}}.grown[_ngcontent-%COMP%]{left:12%;top:25%;width:75%;height:50%}"]}),e})()}];let _=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p.oAB({type:e}),e.\u0275inj=p.cJS({imports:[[l.Bz.forChild(C)],l.Bz]}),e})(),O=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p.oAB({type:e}),e.\u0275inj=p.cJS({imports:[[a.Pc,i.ez,o.u5,r.e,_]]}),e})()}}]);